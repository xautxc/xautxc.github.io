<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>学创平台</title>
    <script src = "https://cdn.wilddog.com/sdk/js/2.1.0/wilddog.js"></script>
</head>
<body>
    <h1 class="hello"></h1>
    <script type="text/javascript">
        //创建 Wilddog Auth 实例
        var config = {
            authDomain: "xautxc.wilddog.com",
            syncURL: "https://xautxc.wilddogio.com"
        }
        wilddog.initializeApp(config);
        
        //注册账号
        // var email = 'czh_xaut@163.com',
        //     pwd = '123456';
        //     
        // wilddog.auth().createUserWithEmailAndPassword(email,pwd)
        // 	.then(function (user) {
        //     console.info("user created.", user);
        // 	}).catch(function (err) {
        //     console.info("create user failed.", err);
        // });
        
        //登录账号
        // var email = 'czh_xaut@163.com',
        //     pwd = '123456';        
        // wilddog.auth().signInWithEmailAndPassword(email, pwd)
        //     .then(function(res){
        //         var user = wilddog.auth().currentUser;
        //         var ref = wilddog.sync().ref("/user");
        //         // console.log(user);
        //         // ref.child("czh_xaut@163").set({
        //         //     "email" : user.email,
        //         //     "emailVerified" : user.emailVerified,
        //         //     "uid" : user.uid,
        //         //     "displayName" : "",
        //         //     "photoURL" : ""
        //         // })
        //     }).catch(function (error) {
        //         // 错误处理
        //         console.log(error);
        //     });
        

        //退出登录
        // wilddog.auth().signOut().then(function () {
        //     console.info("user sign out.");
        // });
        
        // var user = wilddog.auth().currentUser;
        // console.log(user);
        
        //获取已登录账号         
        wilddog.auth().onAuthStateChanged(function(user) {
            if (user) {
                document.querySelector('.hello').innerHTML = 'hello ' + user.email;
                // console.log(user);
                
            } else {
                console.log("no user");
            }
        });
        
        //读取存储内容
        // var ref = wilddog.sync().ref("/user");
        // ref.once('value',function(snapshot){
        //     console.log(snapshot.val()['czh_xaust@163']);
        // });
        // 
        // // 邮箱验证
        // wilddog.auth().currentUser
        // .sendEmailVerification();
    </script>
</body>
</html>
